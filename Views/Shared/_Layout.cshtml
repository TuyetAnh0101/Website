@inject SportsStore.Models.IStoreRepository repo
@{
    ViewBag.Categories = repo.Categories.ToList();
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - RESTUDYSTORE</title>

    <!-- Bootstrap & FontAwesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Montserrat:wght@700&family=Oswald:wght@700&display=swap" rel="stylesheet" />
    <!-- Custom CSS -->
    <link href="~/css/site.css" rel="stylesheet" />
</head>

        <body class="d-flex flex-column min-vh-100">
            <!-- HEADER -->
            <div class="main-header text-dark py-2">
                <div class="container d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center gap-4">
                        <a href="/" class="fw-medium text-decoration-none" style="font-size:14px; color:#0f2e22;">Trang chủ</a>
                        <a href="/khuyen-mai" class="fw-medium text-decoration-none" style="font-size:14px; color:#0f2e22;">Khuyến mãi</a>
                    </div>
                    <div class="d-flex align-items-center gap-3">
            <vc:cart-summary />
            @if (User.Identity.IsAuthenticated)
            {
                <a href="/account/profile" class="text-white d-flex align-items-center">
                    <img src="~/images/account.png" alt="user icon" style="width: 30px; height: 30px;" />
                </a>
            }
            else
            {
                <a href="/account/login" class="text-white d-flex align-items-center">
                    <img src="~/images/account.png" alt="user icon" style="width: 30px; height: 30px;" />
                </a>
            }
        </div>
        </div>
    </div>
<!-- SUB HEADER -->
<div class="sub-header bg-light border-bottom shadow-sm">
    <div class="container py-4 d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3" id="sub-header-container">

        <!-- Tên thương hiệu (giữ nguyên) -->
        <h2 class="store-name m-0 text-success fw-bold" style="font-size: 28px !important;">
            RESTUDY STORE
        </h2>

        <!-- Form tìm kiếm -->
        <form asp-controller="Home" asp-action="Index" method="get" 
              class="search-form d-flex flex-column flex-md-row gap-2 align-items-stretch w-100" 
              style="max-width: 750px;" id="search-form">

            <!-- Nhập tìm kiếm -->
            <div class="input-group shadow-sm rounded" style="flex: 1; min-width: 250px;">
                <input type="text" name="search" class="form-control border-0" placeholder=" Nhập tên sản phẩm cần tìm" />
                <button class="btn btn-outline-dark" type="button" onclick="toggleAdvancedFilters()" title="Bộ lọc nâng cao">
                    <i class="fas fa-sliders-h"></i>
                </button>
            </div>

            <!-- Nút Tìm -->
            <button type="submit" class="btn btn-success fw-semibold shadow-sm px-4">
                <i class="fas fa-search me-1"></i> Tìm
            </button>

            <!-- Bộ lọc nâng cao -->
            <div id="advanced-filters" class="d-none w-100 mt-3 d-flex flex-wrap gap-2 animate__animated animate__fadeIn">
                <select name="categoryId" class="form-select shadow-sm">
                    <option value="">--Danh mục--</option>
                    @foreach (var category in ViewBag.Categories as List<Category>)
                    {
                        <option value="@category.CategoryId">@category.Name</option>
                    }
                </select>

                <select name="condition" class="form-select shadow-sm">
                    <option value="">--Tình trạng--</option>
                    <option value="100">Mới 100%</option>
                    <option value="90">Mới 90%</option>
                    <option value="80">Mới 80%</option>
                    <option value="70">Mới 70%</option>
                </select>

                <select name="rentDuration" class="form-select shadow-sm">
                    <option value="">--Thời hạn thuê--</option>
                    <option value="7">1 tuần</option>
                    <option value="30">1 tháng</option>
                    <option value="90">3 tháng</option>
                </select>
            </div>
        </form>
    </div>
</div>

<!-- Hiệu ứng -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<!-- JS Toggle -->
<script>
    function toggleAdvancedFilters() {
        const filters = document.getElementById("advanced-filters");
        filters.classList.toggle("d-none");
    }
</script>

<!-- Responsive Tối Ưu -->
<style>
    @@media (max-width: 767.98px) {
        #sub-header-container {
            align-items: stretch !important;
        }

        .search-form {
            flex-direction: column !important;
        }

        .search-form .form-select {
            width: 100%;
        }
    }
</style>

    <!-- BANNER CAROUSEL -->
    <div class="container py-4 flex-grow-1">
        <div id="mainBannerCarousel" class="carousel slide rounded shadow-sm" data-bs-ride="carousel">
            <div class="carousel-inner rounded overflow-hidden">
                <div class="carousel-item active">
                    <img src="~/images/Banner1.jpg" class="d-block w-100 banner-img" alt="Banner 1">
                </div>
                <div class="carousel-item">
                    <img src="~/images/Banner2.jpg" class="d-block w-100 banner-img" alt="Banner 2">
                </div>
                <div class="carousel-item">
                    <img src="~/images/Banner3.jpg" class="d-block w-100 banner-img" alt="Banner 3">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#mainBannerCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Trước</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#mainBannerCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Sau</span>
            </button>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="container py-4 flex-grow-1">
        <div class="row">
            <!-- DANH MỤC DỌC -->
            <div class="col-md-3">
                <div class="product-sidebar bg-white shadow-sm rounded p-3 mb-4">
                    <h6 class="text-uppercase fw-bold text-dark fs-5 mb-3">Danh mục</h6>
                    <div class="d-flex flex-column gap-1">
                        <a href="/Home/Index?categoryId=1" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Giáo trình cũ</a>
                        <a href="/Home/Index?categoryId=2" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Dụng cụ học tập</a>
                        <a href="/Home/Index?categoryId=3" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Balo & Túi xách</a>
                        <a href="/Home/Index?categoryId=5" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Sách - Truyện Tranh</a>
                        <a href="/Home/Index?categoryId=6" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Dụng Cụ Vẽ - VPP</a>
                        <a href="/Home/Index?categoryId=7" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Bảng Vẽ - Phụ Kiện Số</a>
                        <a href="/Home/Index?categoryId=8" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Bách Hóa Online</a>
                        <a href="/Home/Index?categoryId=9" class="category-card px-2 py-1 text-decoration-none fs-6 fw-normal">Quà Tặng - Đồ Chơi</a>
                    </div>

                </div>
            </div>

            <!-- HIỂN THỊ SẢN PHẨM -->
            <div class="col-md-9">
                @RenderBody()
            </div>
        </div>
    </div>
<!-- FOOTER -->
<footer class="bg-dark text-white pt-5 pb-4 mt-auto shadow-lg">
    <div class="container">
        <div class="row gy-4">
            <!-- Logo + Giới thiệu -->
            <div class="col-md-4">
                <h3 class="mb-3 text-uppercase fw-bold text-primary" style="letter-spacing: 2px;">RESTUDY STORE</h3>
                <p class="text-light">Website học tập đa dịch vụ hàng đầu, cung cấp giáo trình cũ, dụng cụ học tập và nhiều sản phẩm hỗ trợ học tập khác.</p>
                <p><i class="fas fa-map-marker-alt me-2 text-primary"></i>806 Lê Quang Đạo, Trung Chánh, Hóc Môn, Hồ Chí Minh</p>
                <p><i class="fas fa-phone-alt me-2 text-primary"></i>Hotline: 0354 902 144</p>
                <p><i class="fas fa-envelope me-2 text-primary"></i>Email: anhngo01012005@gmail.com</p>
            </div>

            <!-- Liên kết nhanh -->
            <div class="col-md-3">
                <h5 class="text-primary mb-3 fw-bold">Liên kết nhanh</h5>
                <ul class="list-unstyled">
                    <li><a href="#" class="footer-link">Trang chủ</a></li>
                    <li><a href="#" class="footer-link">Khuyến mãi</a></li>
                    <li><a href="#" class="footer-link">Chính sách</a></li>
                    <li><a href="#" class="footer-link">Bảo mật</a></li>
                    <li><a href="#" class="footer-link">Điều khoản</a></li>
                </ul>
            </div>

            <!-- Mạng xã hội + nhận tin -->
            <div class="col-md-5">
                <h5 class="text-primary mb-3 fw-bold">Kết nối với chúng tôi</h5>
                <div class="d-flex gap-3 fs-4 mb-3">
                    <a href="#" class="social-icon"><i class="fab fa-facebook-square"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter-square"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                </div>

                <form class="d-flex" onsubmit="event.preventDefault(); alert('Cảm ơn bạn đã đăng ký nhận tin!');">
                    <input type="email" class="form-control me-2 rounded-3" placeholder="Nhập email nhận tin" required>
                    <button type="submit" class="btn btn-outline-primary rounded-3">Đăng ký</button>
                </form>
            </div>
        </div>

        <hr class="border-secondary my-4" />

        <div class="text-center text-light small">
            &copy; 2025 <span class="fw-semibold text-primary">RestudyStore</span> – Website học tập đa dịch vụ | Designed by Tuyết Anh_Vân Anh
        </div>
    </div>
</footer>

<style>
    .footer-link {
        display: block;
        color: #ccc;
        padding: 6px 0;
        transition: all 0.2s ease-in-out;
        text-decoration: none;
        font-weight: 500;
    }

    .footer-link:hover {
        color: #ffffff;
        text-decoration: underline;
        transform: translateX(3px);
    }

    .social-icon {
        color: #ccc;
        transition: all 0.2s ease-in-out;
    }

    .social-icon:hover {
        color: #0d6efd;
        transform: scale(1.1);
    }

    footer input.form-control {
        background-color: #f1f1f1;
        border: none;
        padding: 10px 15px;
    }

    footer input.form-control:focus {
        box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
    }
</style>
<!-- GIA SƯ BANNER -->
<div id="tutorBanner" class="tutor-banner position-fixed"
     style="bottom: 15px; right: 15px; background: linear-gradient(45deg, #ff416c, #ff4b2b); color:#fff; border-radius: 40px; padding: 10px 18px; cursor:pointer; box-shadow: 0 10px 25px rgba(0,0,0,0.3); display: flex; align-items: center; gap: 12px; z-index: 1050; transform: translateZ(0); transition: transform 0.4s ease, box-shadow 0.4s ease;">
    <div class="label fw-bold fs-6 text-uppercase" style="letter-spacing: 0.8px; font-size: 14px;">
        <i class="fa fa-bolt me-2"></i>Gia sư siêu tốc
    </div>
    <a href="/Tutor/ListTutors" class="icon text-white fs-5 d-flex align-items-center justify-content-center"
       style="background: rgba(255, 255, 255, 0.2); width: 36px; height: 36px; border-radius: 50%; transition: background 0.3s ease;">
        <i class="fa fa-chalkboard-teacher"></i>
    </a>
</div>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<!-- JavaScript -->
<script>
    // Rung banner định kỳ
    setInterval(() => {
        const banner = document.getElementById('tutorBanner');
        if (banner) {
            banner.classList.remove('shake-banner');
            void banner.offsetWidth;
            banner.classList.add('shake-banner');
        }
    }, 15000);
</script>

<!-- CSS -->
<style>
    .tutor-banner:hover {
        transform: scale(1.06);
        box-shadow: 0 12px 30px rgba(255, 65, 108, 0.65);
    }

    .tutor-banner .icon:hover {
        background: rgba(255, 255, 255, 0.4);
    }

    @@keyframes shake {
        0% { transform: scale(1) rotate(0deg); }
        25% { transform: scale(1.01) rotate(1deg); }
        50% { transform: scale(1.02) rotate(-1deg); }
        75% { transform: scale(1.01) rotate(1deg); }
        100% { transform: scale(1) rotate(0deg); }
    }

    .shake-banner {
        animation: shake 0.7s ease;
    }

    @@media (max-width: 576px) {
        #tutorBanner {
            right: 8px;
            left: 8px;
            bottom: 10px;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 12px 18px;
        }

        .tutor-banner .label {
            font-size: 13px;
        }

        .tutor-banner .icon {
            width: 32px;
            height: 32px;
        }
    }
</style>
</style>
</body>
</html>
