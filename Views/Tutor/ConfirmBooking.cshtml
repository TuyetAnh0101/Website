@model SportsStore.Models.TutorBooking

@{
    ViewData["Title"] = "Xác nhận đặt lịch";
}

<h2 class="mb-3">Xác nhận đặt lịch thuê gia sư</h2>

<div class="card shadow-sm p-3 mb-4 bg-light">
    <p><strong>Gia sư:</strong> @Model.Tutor?.Name</p>
    <p><strong>Số giờ thuê mỗi ngày:</strong> @Model.DurationHours giờ</p>
    <p><strong>Số ngày thuê:</strong> @Model.NumberOfDays ngày</p>
    <p><strong>Ngày bắt đầu:</strong> @Model.StartTime?.ToString("dd/MM/yyyy")</p>
    <p><strong>Ghi chú:</strong> @(string.IsNullOrWhiteSpace(Model.Notes) ? "Không có" : Model.Notes)</p>
    
    @* Tính tổng giá dự kiến *@
    @{
        decimal hourlyRate = Model.Tutor?.HourlyRate ?? 0;
        decimal total = hourlyRate * Model.DurationHours * Model.NumberOfDays;
    }

    <p><strong>Đơn giá theo giờ:</strong> @string.Format("{0:N0} đ", hourlyRate)</p>
    <p class="fw-bold text-success">
        Tổng giá dự kiến: @string.Format("{0:N0} đ", total)
    </p>
</div>

<form asp-action="ConfirmBooking" method="post">
    @Html.AntiForgeryToken()

    <!-- Hidden fields để giữ dữ liệu -->
    <input type="hidden" asp-for="TutorId" />
    <input type="hidden" asp-for="DurationHours" />
    <input type="hidden" asp-for="NumberOfDays" />
    <input type="hidden" asp-for="StartTime" />
    <input type="hidden" asp-for="Notes" />
    <input type="hidden" name="TotalPrice" value="@total" />

    <div class="d-flex gap-2">
        <button type="submit" class="btn btn-success">
            <i class="fas fa-check-circle me-1"></i> Xác nhận đặt
        </button>
        <a asp-action="Details" asp-route-id="@Model.TutorId" class="btn btn-secondary">
            <i class="fas fa-times-circle me-1"></i> Hủy
        </a>
    </div>
</form>
